<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIA5 - AI Risk Intelligence Platform</title>
    <meta name="description" content="Next-Generation AI Risk Intelligence and Enterprise GRC Platform">
    
    <!-- Alpine.js FIRST (before any other scripts that might depend on it) -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons and Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js and other libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    
    <!-- Alpine.js cloak to prevent FOUC -->
    <style>
        [x-cloak] { display: none !important; }
        
        /* Ensure dropdowns are properly hidden initially */
        .dropdown-menu[x-show] {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 font-['Inter']">
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
    </div>
    
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-3">
                        <div class="h-10 w-10 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-semibold text-gray-900">ARIA5</h1>
                            <p class="text-xs text-gray-500">Risk Intelligence</p>
                        </div>
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-1">
                    <!-- Overview Dropdown -->
                    <div class="relative" x-data="{ open: false }">
                        <button @click="open = !open" 
                                @click.away="open = false"
                                class="flex items-center space-x-1 px-3 py-2 text-gray-700 hover:text-blue-600 rounded-lg text-sm font-medium">
                            <i class="fas fa-chart-line mr-1"></i>
                            <span>Overview</span>
                            <i class="fas fa-chevron-down text-xs" :class="{ 'rotate-180': open }"></i>
                        </button>
                        <div x-show="open" 
                             x-cloak
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100"
                             x-transition:leave="transition ease-in duration-75"
                             x-transition:leave-start="opacity-100 transform scale-100"
                             x-transition:leave-end="opacity-0 transform scale-95"
                             class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-xl border">
                            <a href="#" data-page="dashboard" class="block px-4 py-3 text-sm text-gray-700 hover:bg-blue-50">
                                <div class="flex items-center">
                                    <i class="fas fa-tachometer-alt w-5 text-blue-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Dashboard</div>
                                        <div class="text-xs text-gray-500">Overview & metrics</div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" data-page="reports" class="block px-4 py-3 text-sm text-gray-700 hover:bg-blue-50">
                                <div class="flex items-center">
                                    <i class="fas fa-chart-bar w-5 text-green-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Reports</div>
                                        <div class="text-xs text-gray-500">Analytics & insights</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Risk Dropdown -->
                    <div class="relative" x-data="{ open: false }">
                        <button @click="open = !open"
                                @click.away="open = false"
                                class="flex items-center space-x-1 px-3 py-2 text-gray-700 hover:text-orange-600 rounded-lg text-sm font-medium">
                            <i class="fas fa-exclamation-triangle mr-1"></i>
                            <span>Risk</span>
                            <i class="fas fa-chevron-down text-xs" :class="{ 'rotate-180': open }"></i>
                        </button>
                        <div x-show="open"
                             x-cloak
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100"
                             x-transition:leave="transition ease-in duration-75"
                             x-transition:leave-start="opacity-100 transform scale-100"
                             x-transition:leave-end="opacity-0 transform scale-95"
                             class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-xl border">
                            <a href="#" data-page="risks" class="block px-4 py-3 text-sm text-gray-700 hover:bg-orange-50">
                                <div class="flex items-center">
                                    <i class="fas fa-list-alt w-5 text-orange-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Risk Register</div>
                                        <div class="text-xs text-gray-500">Manage risks</div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" data-page="incidents" class="block px-4 py-3 text-sm text-gray-700 hover:bg-orange-50">
                                <div class="flex items-center">
                                    <i class="fas fa-fire w-5 text-red-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Incidents</div>
                                        <div class="text-xs text-gray-500">Security events</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Compliance Dropdown -->
                    <div class="relative" x-data="{ open: false }">
                        <button @click="open = !open"
                                @click.away="open = false"
                                class="flex items-center space-x-1 px-3 py-2 text-gray-700 hover:text-purple-600 rounded-lg text-sm font-medium">
                            <i class="fas fa-clipboard-check mr-1"></i>
                            <span>Compliance</span>
                            <i class="fas fa-chevron-down text-xs" :class="{ 'rotate-180': open }"></i>
                        </button>
                        <div x-show="open"
                             x-cloak
                             x-transition:enter="transition ease-out duration-200"
                             x-transition:enter-start="opacity-0 transform scale-95"
                             x-transition:enter-end="opacity-100 transform scale-100"
                             x-transition:leave="transition ease-in duration-75"
                             x-transition:leave-start="opacity-100 transform scale-100"
                             x-transition:leave-end="opacity-0 transform scale-95"
                             class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-xl border">
                            <a href="#" data-page="compliance" class="block px-4 py-3 text-sm text-gray-700 hover:bg-purple-50">
                                <div class="flex items-center">
                                    <i class="fas fa-building-columns w-5 text-purple-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Frameworks</div>
                                        <div class="text-xs text-gray-500">ISO, SOC 2, GDPR</div>
                                    </div>
                                </div>
                            </a>
                            <a href="#" data-page="assessments" class="block px-4 py-3 text-sm text-gray-700 hover:bg-purple-50">
                                <div class="flex items-center">
                                    <i class="fas fa-tasks w-5 text-orange-500 mr-3"></i>
                                    <div>
                                        <div class="font-medium">Assessments</div>
                                        <div class="text-xs text-gray-500">Evaluations</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Right Section -->
                <div class="flex items-center space-x-4">
                    <span id="welcome-message" class="text-sm text-gray-600"></span>
                    <button id="auth-button" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                        <i class="fas fa-sign-in-alt mr-1"></i>Login
                    </button>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main id="main-content" class="max-w-7xl mx-auto px-4 py-8">
        <!-- Content will be loaded here -->
    </main>
    
    <!-- Load Helper Scripts -->
    <script src="/static/helpers.js"></script>
    
    <!-- Load Authentication Debug Helper -->
    <script src="/static/auth-debug.js"></script>
    
    <!-- Load Main Application -->
    <script src="/static/app.js"></script>
    
    <!-- Alpine.js initialization check -->
    <script>
        document.addEventListener('alpine:init', () => {
            console.log('✅ Alpine.js initialized successfully');
        });
        
        document.addEventListener('alpine:initialized', () => {
            console.log('✅ Alpine.js components ready');
        });
    </script>
</body>
</html>