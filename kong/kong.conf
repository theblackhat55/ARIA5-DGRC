# Kong Configuration for GRC 3.1 Platform
# Production-ready configuration with security and performance optimizations

# Database settings
database = postgres
pg_host = postgres
pg_port = 5432
pg_user = grctier
pg_password = grctier_secure_password_2024
pg_database = kong

# Network settings
proxy_listen = 0.0.0.0:8000, 0.0.0.0:8443 ssl
admin_listen = 0.0.0.0:8001
admin_gui_listen = 0.0.0.0:8002

# Logging
log_level = info
proxy_access_log = /dev/stdout
admin_access_log = /dev/stdout
proxy_error_log = /dev/stderr
admin_error_log = /dev/stderr

# Security headers
real_ip_header = X-Forwarded-For
trusted_ips = 0.0.0.0/0,::/0

# Performance settings
worker_processes = 2
worker_connections = 1024
upstream_keepalive_pool_size = 60
upstream_keepalive_max_requests = 100
upstream_keepalive_idle_timeout = 60s

# Plugin settings
plugins = bundled,cors,jwt,rate-limiting,request-transformer,response-transformer,basic-auth,key-auth,oauth2,acl,file-log,prometheus

# Nginx settings
nginx_worker_processes = 2
nginx_daemon = off

# Admin API security (disable in production with proper auth)
admin_gui_auth = basic-auth
admin_gui_session_conf = {"secret":"admin-session-secret","storage":"kong","cookie_secure":false}

# SSL settings (configure in production)
ssl_cert_key = /etc/kong/ssl/kong.key
ssl_cert = /etc/kong/ssl/kong.crt

# Proxy cache settings
proxy_cache_path = /tmp/kong_cache